ConvertCiMovieToNWB :
  non_motion_corrected_file_name :
    keyword : ["non_corrected"]
    dir: ["ci_data"]
    keyword_to_exclude : []
    extension : ["tif"]
    value : []
  xy_translation_file_name :
    keyword : ["xy_shifts"]
    dir: ["ci_data"]
    keyword_to_exclude : []
    extension : ["npy", "mat"]
    value : []
  motion_corrected_file_name :
    keyword : ["MotCorr"]
    dir: ["ci_data"]
    keyword_to_exclude : ["non", "avg"]
    extension : ["tif", "tiff"]
    value : []
  yaml_file_name :
    keyword : ["session_data"]
    keyword_to_exclude : ["default"]
    extension : ["yaml"]
    value : []
  format :
    keyword : []
    keyword_to_exclude : []
    extension : []
#    value : ["external"]
    value : ["tiff"]
  ci_sampling_rate:
#    value: 10.0
    from_other_converter: ConvertAbfToNWB
    value: ["sampling_rate_calcium_imaging"]

ConvertCellTypeToNWB:
  cell_type_predictions_file :
    keyword: ["cell_type_predictions"]
    keyword_to_exclude: []
    dir: ["cell_type_predictions"]
    extension: ["npy", "npz"]
    value: []
  predictions_threshold :
    value : 0.5
  unknown_cell_type_name:
     value: "UFO"
  cell_type_config_file :
    keyword: ["pyr_vs_ins_vs_noise_multi_class"]
    keyword_to_exclude: []
    dir: ["cell_type_predictions"]
    extension: ["yaml"]
    value: []

ConvertBehaviorMovieToNWB:
  1:
    behavior_movie_file_name:
      keyword: ["22983298"]
      keyword_to_exclude: []
      dir: ["behavior"]
      extension: ["avi"]
      value: []
  2:
    behavior_movie_file_name:
      keyword: ["23109588"]
      keyword_to_exclude: []
      dir: ["behavior"]
      extension: ["avi"]
      value: []

ConvertNeuralActivityToNWB:
  1:
    predictions:
# meso_v2_epoch_19
      keyword : ["v26_5_v37_6", "v37_6_v26_5", "v37_epoch_6"]
      dir : ["activity_predictions"]
      extension : ["npy", "npz", "mat"]
    predictions_keyword:
# meso_v2_epoch_19
      value : "v26_5_v37_6"
    threshold_predictions :
      value : 0.5
    segmentation_tool:
      value : "suite2p"
    data_id:
      value: all_cells
    cell_type_codes:
      from_other_converter: ConvertCellTypeToNWB
      value: ["cell_type_codes"]
    cell_type_names:
      from_other_converter: ConvertCellTypeToNWB
      value: ["cell_type_names"]
    cell_type_codes_to_remove:
      value: [2]
  2:
    cascade_raster:
      keyword : ["cascade"]
      dir : ["activity_predictions"]
      extension : ["npy"]
    descr:
      value: ["cascade_spikes_raster"]
    segmentation_tool:
      value : "suite2p"
    data_id:
      value: all_cells
    cell_type_codes:
      from_other_converter: ConvertCellTypeToNWB
      value: ["cell_type_codes"]
    cell_type_names:
      from_other_converter: ConvertCellTypeToNWB
      value: ["cell_type_names"]
    cell_type_codes_to_remove:
      value: [2]
ConvertSignalToNWB:
  1:
    signal_data:
      keyword : ["emg"]
      extension : ["npz"]
      dir: ["signal"]
      value: emg_signal
    timestamps:
      keyword: ["emg"]
      extension: ["npz"]
      dir: ["signal"]
      value: timestamps
    data_id:
      value: emg
    unity:
      value: "V"
    nwb_module:
      value: 'behavior'
  2:
    signal_data:
      keyword: ["distance"]
      extension: ["npz"]
      dir: ["signal"]
      value: translated_distance
    timestamps:
      keyword: ["distance"]
      extension: ["npz"]
      dir: ["signal"]
      value: timestamps
    data_id:
      value: motion correction distance
    unity:
      value: "Âµm"
    nwb_module:
      value: 'ophys'
  3:
    signal_data:
      keyword: ["forelimb_left"]
      extension: ["npz"]
      dir: ["signal"]
      value: forelimb_left
    timestamps:
      keyword: ["forelimb_left"]
      extension: ["npz"]
      dir: ["signal"]
      value: timestamps
    data_id:
      value: forelimb_left
    unity:
      value: "pixel"
    nwb_module:
      value: 'behavior'
  4:
    signal_data:
      keyword: ["forelimb_right"]
      extension: ["npz"]
      dir: ["signal"]
      value: forelimb_right
    timestamps:
      keyword: ["forelimb_right"]
      extension: ["npz"]
      dir: ["signal"]
      value: timestamps
    data_id:
      value: forelimb_right
    unity:
      value: "pixel"
    nwb_module:
      value: 'behavior'
  5:
    signal_data:
      keyword: ["hindlimb_left"]
      extension: ["npz"]
      dir: ["signal"]
      value: hindlimb_left
    timestamps:
      keyword: ["hindlimb_left"]
      extension: ["npz"]
      dir: ["signal"]
      value: timestamps
    data_id:
      value: hindlimb_left
    unity:
      value: "pixel"
    nwb_module:
      value: 'behavior'
  6:
    signal_data:
      keyword: ["hindlimb_right"]
      extension: ["npz"]
      dir: ["signal"]
      value: hindlimb_right
    timestamps:
      keyword: ["hindlimb_right"]
      extension: ["npz"]
      dir: ["signal"]
      value: timestamps
    data_id:
      value: hindlimb_right
    unity:
      value: "pixel"
    nwb_module:
      value: 'behavior'
  7:
    signal_data:
      keyword: ["tail_left"]
      extension: ["npz"]
      dir: ["signal"]
      value: tail_left
    timestamps:
      keyword: ["tail_left"]
      extension: ["npz"]
      dir: ["signal"]
      value: timestamps
    data_id:
      value: tail_left
    unity:
      value: "pixel"
    nwb_module:
      value: 'behavior'
  8:
    signal_data:
      keyword: ["tail_right"]
      extension: ["npz"]
      dir: ["signal"]
      value: tail_right
    timestamps:
      keyword: ["tail_right"]
      extension: ["npz"]
      dir: ["signal"]
      value: timestamps
    data_id:
      value: tail_right
    unity:
      value: "pixel"
    nwb_module:
      value: 'behavior'

ConvertTimeIntervalsToNWB:
  1:
    intervals_data:
      keyword: ["mvts_categories"]
      dir: ["behavior"]
      extension: ["npz"]
      value: shift_twitch
    name:
      value: twitches
    description:
      value: time intervals during which twitches happen
    ci_recording_pause_included:
      value: False
    behavior:
      value: True
    time_in_frames:
      value: True
  2:
    intervals_data:
      keyword: ["mvts_categories"]
      dir: ["behavior"]
      extension: ["npz"]
      value: shift_long
    name:
      value: long_movement
    description:
      value: time intervals during which long movements happen
    ci_recording_pause_included:
      value: False
    behavior:
      value: True
    time_in_frames:
      value: True
  3:
    intervals_data:
      keyword: ["mvts_categories"]
      dir: ["behavior"]
      extension: ["npz"]
      value: shift_unclassified
    name:
      value: unclassified_movement
    description:
      value: time intervals during which unclassified movements happen
    ci_recording_pause_included:
      value: False
    behavior:
      value: True
    time_in_frames:
      value: True
  4:
    intervals_data:
      keyword: ["invalid_frames"]
      keyword_to_exclude: ["categories"]
      dir: ["ci_data"]
      extension: ["yaml", "yml"]
      value: []
    name:
      value: invalid_frames
    description:
      value: time intervals during which the CI movie is corrupted (like z shift movement).
    ci_recording_pause_included:
      value: False
    behavior:
      value: False
    time_in_frames:
      value: True
  5:
    intervals_data:
      keyword: ["cicada"]
      dir: ["behavior"]
      extension: ["npz"]
    ci_recording_pause_included:
      value: True
    behavior:
      value: True
    time_in_frames:
      value: False
  6:
    intervals_data:
      keyword: ["hypnogram"]
      dir: ["behavior"]
      extension: ["npz"]
    ci_recording_pause_included:
      value: True
    behavior:
      value: True
    time_in_frames:
      value: False
  7:
    intervals_data:
      keyword: ["lfp"]
      dir: ["signal"]
      extension: ["npz"]
    ci_recording_pause_included:
      value: True
    behavior:
      value: False
    time_in_frames:
      value: False

ConvertSuite2pRoisToNWB:
  1:
    suite2p_dir :
      keyword : ["suite2p"]
      keyword_to_exclude : ["without_ins"]
      extension : []
      value : []
# represent the equivalent of the stat.npy output by suite2p
# in that case, only the pixel_mask in will be used
# is stat is found, then the suite2p_dir won't be used
    stat:
      keyword: ["Add_suite2p"]
#      keyword: ["Add & Replace_suite2p"]
      keyword_to_exclude: []
      dir: ["contours_final"]
      extension: ["npy"]
    data_id:
      value: all_cells
    cell_type_codes:
      from_other_converter: ConvertCellTypeToNWB
      value: ["cell_type_codes"]
    cell_type_names:
      from_other_converter: ConvertCellTypeToNWB
      value: ["cell_type_names"]
    cell_type_codes_to_remove:
      value: [2]


#  2:
#    stat:
#      keyword: ["without_ins"]
#      extension: ["npy"]
#    data_id:
#      value: pyr_cells

ConvertFijiRoisToNWB:
  1:
    fiji_coords_file:
      keyword : [""]
      keyword_to_exclude : []
      dir: ["contours_final"]
      extension : ["zip", "roi"]
      value : []
    data_id:
      value: all_cells
    cell_type_codes:
      from_other_converter: ConvertCellTypeToNWB
      value: ["cell_type_codes"]
    cell_type_names:
      from_other_converter: ConvertCellTypeToNWB
      value: ["cell_type_names"]
    cell_type_codes_to_remove:
      value: [2]


#ConvertCaimanRoisToNWB:
#  coords:
#    keyword: ["coords"]
#    extension: ["mat"]
#    value: coord_python
#  data_id:
#    value: all_cells
#  from_matlab:
#    value: False

#ConvertCaimanRoisToNWB:
#  coords:
#    keyword: ["interneurons"]
#    extension: ["mat"]
#    value: CorrCell
#  data_id:
#    value: interneurons
#  from_matlab:
#    value: False

CreateNWB :
  session_data_yaml :
    keyword : ["session_data"]
    keyword_to_exclude : []
    extension : ["yaml", "yml"]
    value : []

  subject_data_yaml:
    keyword: ["subject_data"]
    keyword_to_exclude: []
    extension: ["yaml", "yml"]
    value: []

ConvertAbfToNWB:
  abf_yaml_file_name:
    keyword: ["abf"]
    keyword_to_exclude: []
    extension: ["yaml", "yml"]
    value: []
  abf_file_name:
    keyword: [""]
    dir: ["abf"]
    keyword_to_exclude: []
    extension: ["abf"]
    value: []
  fusion_movie_segments:
# if False, CI pause epochs will be created
    value: False

order :
 [ConvertAbfToNWB, ConvertCiMovieToNWB, ConvertCellTypeToNWB, ConvertSuite2pRoisToNWB, ConvertFijiRoisToNWB,
  ConvertNeuralActivityToNWB, ConvertTimeIntervalsToNWB, ConvertBehaviorMovieToNWB, ConvertSignalToNWB]

#  [ConvertCiMovieToNWB, ConvertSuite2pRoisToNWB, ConvertNeuralActivityToNWB, ConvertTimeIntervalsToNWB]
#
#, ConvertCaimanRoisToNWB]